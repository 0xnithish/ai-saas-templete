[{"filePath":"/home/niiithish/Work/ai-saas-templete/app/(auth)/forgot-password/page.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":19,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":19,"endColumn":39},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":38,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":38,"endColumn":20,"suggestions":[{"fix":{"range":[1109,1130],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState } from \"react\";\nimport { forgetPassword } from \"@/lib/auth-client\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { toast } from \"sonner\";\nimport Link from \"next/link\";\nimport { ArrowLeft } from \"lucide-react\";\n\nexport const dynamic = 'force-dynamic';\n\nexport default function ForgotPasswordPage() {\n  const [email, setEmail] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [emailSent, setEmailSent] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      const result = await forgetPassword({\n        email,\n        redirectTo: \"/reset-password\",\n      });\n\n      if (result.error) {\n        toast.error(result.error.message || \"Failed to send reset email\");\n        return;\n      }\n\n      setEmailSent(true);\n      toast.success(\"Password reset email sent! Check your inbox.\");\n    } catch (error) {\n      toast.error(\"An unexpected error occurred\");\n      console.error(error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-background px-4\">\n      <div className=\"w-full max-w-md space-y-6\">\n        <div className=\"text-center space-y-2\">\n          <h1 className=\"text-3xl font-bold tracking-tight\">Forgot Password</h1>\n          <p className=\"text-muted-foreground\">\n            {emailSent\n              ? \"Check your email for a password reset link\"\n              : \"Enter your email to receive a password reset link\"}\n          </p>\n        </div>\n\n        {!emailSent ? (\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">Email</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"you@example.com\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n                disabled={isLoading}\n              />\n            </div>\n\n            <Button type=\"submit\" className=\"w-full\" disabled={isLoading}>\n              {isLoading ? \"Sending...\" : \"Send Reset Link\"}\n            </Button>\n          </form>\n        ) : (\n          <div className=\"space-y-4\">\n            <div className=\"rounded-lg bg-muted p-4 text-sm text-muted-foreground\">\n              We&apos;ve sent a password reset link to <strong>{email}</strong>.\n              Please check your inbox and follow the instructions.\n            </div>\n            <Button\n              variant=\"outline\"\n              className=\"w-full\"\n              onClick={() => setEmailSent(false)}\n            >\n              Send to a different email\n            </Button>\n          </div>\n        )}\n\n        <div className=\"text-center\">\n          <Link\n            href=\"/sign-in\"\n            className=\"inline-flex items-center gap-2 text-sm text-primary hover:underline\"\n          >\n            <ArrowLeft className=\"h-4 w-4\" />\n            Back to sign in\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/app/(auth)/layout.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":6,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export const dynamic = 'force-dynamic';\n\nexport default function AuthLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return children;\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/app/(auth)/reset-password/page.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":20,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":20,"endColumn":39},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":50,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":50,"endColumn":20,"suggestions":[{"fix":{"range":[1394,1415],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { resetPassword } from \"@/lib/auth-client\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { toast } from \"sonner\";\n\nexport default function ResetPasswordPage() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const token = searchParams?.get(\"token\") || null;\n\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (password !== confirmPassword) {\n      toast.error(\"Passwords do not match\");\n      return;\n    }\n\n    if (!token) {\n      toast.error(\"Invalid or missing reset token\");\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      const result = await resetPassword({\n        newPassword: password,\n        token,\n      });\n\n      if (result.error) {\n        toast.error(result.error.message || \"Failed to reset password\");\n        return;\n      }\n\n      toast.success(\"Password reset successfully! You can now sign in.\");\n      router.push(\"/sign-in\");\n    } catch (error) {\n      toast.error(\"An unexpected error occurred\");\n      console.error(error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (!token) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background px-4\">\n        <div className=\"w-full max-w-md space-y-6 text-center\">\n          <h1 className=\"text-3xl font-bold tracking-tight\">Invalid Link</h1>\n          <p className=\"text-muted-foreground\">\n            This password reset link is invalid or has expired.\n          </p>\n          <Button onClick={() => router.push(\"/forgot-password\")}>\n            Request New Link\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-background px-4\">\n      <div className=\"w-full max-w-md space-y-6\">\n        <div className=\"text-center space-y-2\">\n          <h1 className=\"text-3xl font-bold tracking-tight\">Reset Password</h1>\n          <p className=\"text-muted-foreground\">\n            Enter your new password below\n          </p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"password\">New Password</Label>\n            <Input\n              id=\"password\"\n              type=\"password\"\n              placeholder=\"••••••••\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              required\n              disabled={isLoading}\n              minLength={8}\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              Must be at least 8 characters\n            </p>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"confirmPassword\">Confirm Password</Label>\n            <Input\n              id=\"confirmPassword\"\n              type=\"password\"\n              placeholder=\"••••••••\"\n              value={confirmPassword}\n              onChange={(e) => setConfirmPassword(e.target.value)}\n              required\n              disabled={isLoading}\n              minLength={8}\n            />\n          </div>\n\n          <Button type=\"submit\" className=\"w-full\" disabled={isLoading}>\n            {isLoading ? \"Resetting...\" : \"Reset Password\"}\n          </Button>\n        </form>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/app/api/auth/[...all]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/app/api/auth/get-session/route.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":12,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":12,"endColumn":18,"suggestions":[{"fix":{"range":[303,350],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from \"next/server\";\nimport { auth } from \"@/lib/auth\";\n\nexport async function GET(request: NextRequest) {\n  try {\n    const session = await auth.api.getSession({\n      headers: request.headers,\n    });\n\n    return NextResponse.json(session);\n  } catch (error) {\n    console.error(\"Error getting session:\", error);\n    return NextResponse.json(null);\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/app/api/checkout/route.ts","messages":[{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":5,"column":16,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":5,"endColumn":50},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":13,"column":16,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":13,"endColumn":50}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Checkout } from '@dodopayments/nextjs';\n\n// Static checkout (GET) - for predefined product links\nexport const GET = Checkout({\n  bearerToken: process.env.DODO_PAYMENTS_API_KEY!,\n  returnUrl: process.env.DODO_PAYMENTS_RETURN_URL || `${process.env.NEXT_PUBLIC_APP_URL}/success`,\n  environment: (process.env.DODO_PAYMENTS_ENVIRONMENT as \"test_mode\" | \"live_mode\") || \"test_mode\",\n  type: \"static\",\n});\n\n// Dynamic checkout (POST) - for custom product carts\nexport const POST = Checkout({\n  bearerToken: process.env.DODO_PAYMENTS_API_KEY!,\n  returnUrl: process.env.DODO_PAYMENTS_RETURN_URL || `${process.env.NEXT_PUBLIC_APP_URL}/success`,\n  environment: (process.env.DODO_PAYMENTS_ENVIRONMENT as \"test_mode\" | \"live_mode\") || \"test_mode\",\n  type: \"dynamic\", // or \"session\" for checkout sessions\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/app/api/customer-portal/route.ts","messages":[{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":4,"column":16,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":4,"endColumn":50}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { CustomerPortal } from '@dodopayments/nextjs';\n\nexport const GET = CustomerPortal({\n  bearerToken: process.env.DODO_PAYMENTS_API_KEY!,\n  environment: (process.env.DODO_PAYMENTS_ENVIRONMENT as \"test_mode\" | \"live_mode\") || \"test_mode\",\n});\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/app/api/user/profile/route.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'request' is defined but never used.","line":5,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"request"},"fix":{"range":[159,179],"text":""},"desc":"Remove unused variable 'request'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'request' is defined but never used. Allowed unused args must match /^_/u.","line":5,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":34},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":31,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":31,"endColumn":18,"suggestions":[{"fix":{"range":[896,949],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from \"next/server\";\nimport { auth } from \"@/lib/auth\";\nimport { headers } from \"next/headers\";\n\nexport async function GET(request: NextRequest) {\n  try {\n    const session = await auth.api.getSession({\n      headers: await headers(),\n    });\n\n    if (!session?.user) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n    }\n\n    // Return user profile data with cache control\n    return NextResponse.json({\n      user: {\n        id: session.user.id,\n        email: session.user.email,\n        name: session.user.name,\n        image: session.user.image,\n        emailVerified: session.user.emailVerified,\n        createdAt: session.user.createdAt,\n      }\n    }, {\n      headers: {\n        \"Cache-Control\": \"public, max-age=300, s-maxage=600\", // Cache for 5 minutes client, 10 minutes server\n      }\n    });\n  } catch (error) {\n    console.error(\"Error fetching user profile:\", error);\n    return NextResponse.json(\n      { error: \"Internal Server Error\" },\n      { status: 500 }\n    );\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/app/api/webhooks/route.ts","messages":[{"ruleId":"no-undef","severity":2,"message":"'Request' is not defined.","line":4,"column":37,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":44},{"ruleId":"no-undef","severity":2,"message":"'URL' is not defined.","line":6,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'URL' is not defined.","line":7,"column":20,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'fetch' is not defined.","line":9,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":31}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\n\n// Redirect legacy webhook endpoint to the new Better Auth endpoint\nexport async function POST(request: Request) {\n  // Redirect to the proper Dodo Payments webhook handler in Better Auth\n  const url = new URL('/api/auth/dodopayments/webhooks', request.url);\n  url.search = new URL(request.url).search;\n  \n  const response = await fetch(url.toString(), {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Forwarded-For': request.headers.get('forwarded-for') || '',\n      'User-Agent': request.headers.get('user-agent') || '',\n    },\n    body: request.body,\n  });\n\n  const data = await response.text();\n  \n  return new NextResponse(data, {\n    status: response.status,\n    headers: {\n      'Content-Type': response.headers.get('content-type') || 'application/json',\n    },\n  });\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/app/dashboard/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/app/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/app/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/app/pricing/page.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":86,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":86,"endColumn":22,"suggestions":[{"fix":{"range":[2354,2394],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":101,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":101,"endColumn":20,"suggestions":[{"fix":{"range":[2837,2888],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { authClient } from \"@/lib/auth-client\";\nimport { useSessionOptimized } from \"@/components/auth/SessionProvider\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Check } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { toast } from \"sonner\";\nimport { useRouter } from \"next/navigation\";\n\nconst tiers = [\n  {\n    name: \"Free\",\n    slug: \"free\",\n    price: \"$0\",\n    description: \"Perfect for getting started\",\n    features: [\n      \"Basic dashboard access\",\n      \"Up to 10 projects\",\n      \"Community support\",\n      \"Basic analytics\",\n    ],\n    cta: \"Current Plan\",\n    highlighted: false,\n  },\n  {\n    name: \"Premium\",\n    slug: \"premium\",\n    price: \"$29\",\n    priceDetail: \"/month\",\n    description: \"For professionals and teams\",\n    features: [\n      \"Everything in Free\",\n      \"Unlimited projects\",\n      \"Priority support\",\n      \"Advanced analytics\",\n      \"Custom integrations\",\n      \"API access\",\n      \"Team collaboration\",\n    ],\n    cta: \"Upgrade to Premium\",\n    highlighted: true,\n  },\n];\n\nexport default function PricingPage() {\n  const { session, isLoading } = useSessionOptimized();\n  const router = useRouter();\n  const [loading, setLoading] = useState<string | null>(null);\n\n  const handleSubscribe = async (slug: string) => {\n    if (!session) {\n      toast.error(\"Please sign in to subscribe\");\n      router.push(\"/sign-in?redirect=/pricing\");\n      return;\n    }\n\n    if (slug === \"free\") {\n      toast.info(\"You're already on the free plan\");\n      return;\n    }\n\n    try {\n      setLoading(slug);\n\n      // Initiate Dodo checkout via Better Auth Dodo client plugin\n      // The client returns { data, error } instead of throwing on HTTP 4xx\n      // @ts-ignore - dodopayments methods are added by the plugin\n      const { data: checkout, error } = await authClient.dodopayments.checkout({\n        slug,\n        customer: {\n          email: session.user.email,\n          name: (session.user.name as string | undefined) ?? undefined,\n        },\n        billing: {\n          city: \"San Francisco\",\n          country: \"US\",\n          state: \"CA\",\n          street: \"123 Market St\",\n          zipcode: \"94103\",\n        },\n      });\n\n      if (error || !checkout) {\n        console.error(\"Checkout error:\", error);\n        toast.error(error?.message || \"Failed to start checkout. Please try again.\");\n        setLoading(null);\n        return;\n      }\n\n      // Redirect user to Dodo checkout URL\n      if (checkout.url) {\n        window.location.href = checkout.url;\n      } else {\n        // Fallback in case URL is missing\n        toast.error(\"Checkout URL not available. Please try again.\");\n        setLoading(null);\n      }\n    } catch (error) {\n      console.error(\"Checkout unexpected error:\", error);\n      toast.error(\"Unexpected error starting checkout. Please try again.\");\n      setLoading(null);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-background to-muted/20\">\n      <div className=\"container mx-auto px-4 py-16\">\n        {/* Header */}\n        <div className=\"text-center mb-16\">\n          <h1 className=\"text-4xl md:text-5xl font-bold mb-4\">\n            Choose Your Plan\n          </h1>\n          <p className=\"text-xl text-muted-foreground max-w-2xl mx-auto\">\n            Start free and upgrade as you grow. All plans include our core features.\n          </p>\n        </div>\n\n        {/* Pricing Cards */}\n        <div className=\"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto\">\n          {tiers.map((tier) => (\n            <Card\n              key={tier.slug}\n              className={`relative ${\n                tier.highlighted\n                  ? \"border-primary shadow-lg scale-105\"\n                  : \"border-border\"\n              }`}\n            >\n              {tier.highlighted && (\n                <div className=\"absolute -top-4 left-1/2 -translate-x-1/2 bg-primary text-primary-foreground px-4 py-1 rounded-full text-sm font-medium\">\n                  Most Popular\n                </div>\n              )}\n              \n              <CardHeader>\n                <CardTitle className=\"text-2xl\">{tier.name}</CardTitle>\n                <CardDescription>{tier.description}</CardDescription>\n                <div className=\"mt-4\">\n                  <span className=\"text-4xl font-bold\">{tier.price}</span>\n                  {tier.priceDetail && (\n                    <span className=\"text-muted-foreground ml-2\">\n                      {tier.priceDetail}\n                    </span>\n                  )}\n                </div>\n              </CardHeader>\n\n              <CardContent>\n                <ul className=\"space-y-3\">\n                  {tier.features.map((feature, index) => (\n                    <li key={index} className=\"flex items-start gap-2\">\n                      <Check className=\"h-5 w-5 text-primary shrink-0 mt-0.5\" />\n                      <span className=\"text-sm\">{feature}</span>\n                    </li>\n                  ))}\n                </ul>\n              </CardContent>\n\n              <CardFooter>\n                <Button\n                  className=\"w-full\"\n                  variant={tier.highlighted ? \"default\" : \"outline\"}\n                  size=\"lg\"\n                  onClick={() => handleSubscribe(tier.slug)}\n                  disabled={loading !== null || isLoading}\n                >\n                  {loading === tier.slug ? \"Loading...\" : tier.cta}\n                </Button>\n              </CardFooter>\n            </Card>\n          ))}\n        </div>\n\n        {/* FAQ or Additional Info */}\n        <div className=\"mt-16 text-center text-sm text-muted-foreground\">\n          <p>All plans include a 14-day money-back guarantee.</p>\n          <p className=\"mt-2\">\n            Questions? Contact us at{\" \"}\n            <a href=\"mailto:support@example.com\" className=\"text-primary hover:underline\">\n              support@example.com\n            </a>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/app/profile/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/app/sign-in/[[...sign-in]]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/app/sign-up/[[...sign-up]]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/app/success/SuccessContent.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":18,"column":19,"nodeType":"Identifier","messageId":"undef","endLine":18,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'clearTimeout' is not defined.","line":22,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":22,"endColumn":30}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useSearchParams } from \"next/navigation\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { CheckCircle2, Loader2 } from \"lucide-react\";\nimport Link from \"next/link\";\n\nexport default function SuccessContent() {\n  const searchParams = useSearchParams();\n  const checkoutId = searchParams.get(\"checkout_id\");\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Simulate checking checkout status\n    // In production, you might want to verify the checkout with Polar API\n    const timer = setTimeout(() => {\n      setLoading(false);\n    }, 2000);\n\n    return () => clearTimeout(timer);\n  }, [checkoutId]);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-b from-background to-muted/20\">\n        <Card className=\"w-full max-w-md\">\n          <CardContent className=\"pt-6\">\n            <div className=\"flex flex-col items-center justify-center space-y-4 py-8\">\n              <Loader2 className=\"h-12 w-12 animate-spin text-primary\" />\n              <p className=\"text-lg text-muted-foreground\">\n                Processing your subscription...\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-b from-background to-muted/20 p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <div className=\"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/20\">\n            <CheckCircle2 className=\"h-10 w-10 text-green-600 dark:text-green-400\" />\n          </div>\n          <CardTitle className=\"text-2xl\">Payment Successful!</CardTitle>\n          <CardDescription>\n            Thank you for subscribing to Premium\n          </CardDescription>\n        </CardHeader>\n\n        <CardContent className=\"space-y-6\">\n          <div className=\"space-y-2 text-sm text-muted-foreground\">\n            <p>\n              Your subscription has been activated successfully. You now have access to all premium features.\n            </p>\n            {checkoutId && (\n              <p className=\"text-xs font-mono bg-muted p-2 rounded\">\n                Checkout ID: {checkoutId}\n              </p>\n            )}\n          </div>\n\n          <div className=\"space-y-3\">\n            <h3 className=\"font-semibold text-sm\">What's next?</h3>\n            <ul className=\"space-y-2 text-sm text-muted-foreground\">\n              <li className=\"flex items-start gap-2\">\n                <CheckCircle2 className=\"h-4 w-4 text-primary shrink-0 mt-0.5\" />\n                <span>Access all premium features in your dashboard</span>\n              </li>\n              <li className=\"flex items-start gap-2\">\n                <CheckCircle2 className=\"h-4 w-4 text-primary shrink-0 mt-0.5\" />\n                <span>Manage your subscription in your profile</span>\n              </li>\n              <li className=\"flex items-start gap-2\">\n                <CheckCircle2 className=\"h-4 w-4 text-primary shrink-0 mt-0.5\" />\n                <span>Get priority support from our team</span>\n              </li>\n            </ul>\n          </div>\n\n          <div className=\"flex flex-col gap-2 pt-4\">\n            <Button asChild size=\"lg\" className=\"w-full\">\n              <Link href=\"/dashboard\">Go to Dashboard</Link>\n            </Button>\n            <Button asChild variant=\"outline\" size=\"lg\" className=\"w-full\">\n              <Link href=\"/profile\">Manage Subscription</Link>\n            </Button>\n          </div>\n\n          <p className=\"text-xs text-center text-muted-foreground\">\n            A confirmation email has been sent to your inbox.\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/app/success/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/auth/AuthForm.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":51,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":51,"endColumn":20,"suggestions":[{"fix":{"range":[1629,1677],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":57,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":57,"endColumn":39},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":92,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":92,"endColumn":20,"suggestions":[{"fix":{"range":[2646,2667],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { signIn, signUp } from \"@/lib/auth-client\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { toast } from \"sonner\";\nimport Link from \"next/link\";\nimport { Eye, EyeOff } from \"lucide-react\";\nimport { SocialLoginButton } from \"./SocialLoginButton\";\n\ninterface AuthFormProps {\n  mode: \"signin\" | \"signup\";\n}\n\nexport function AuthForm({ mode }: AuthFormProps) {\n  const router = useRouter();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [socialLoading, setSocialLoading] = useState<string | null>(null);\n  const [showPassword, setShowPassword] = useState(false);\n\n  useEffect(() => {\n    if (mode === \"signup\") {\n      router.prefetch(\"/sign-in\");\n    }\n  }, [mode, router]);\n\n  const handleSocialSignIn = async (provider: \"google\" | \"github\") => {\n    try {\n      setSocialLoading(provider);\n\n      const result = await signIn.social({\n        provider,\n        callbackURL: \"/dashboard\",\n      });\n\n      if (result.error) {\n        toast.error(result.error.message || `Failed to sign in with ${provider}`);\n        return;\n      }\n\n      toast.success(`Signed in with ${provider} successfully!`);\n      // Better Auth will handle the redirect automatically\n    } catch (error) {\n      toast.error(`An unexpected error occurred with ${provider} authentication`);\n      console.error(`${provider} auth error:`, error);\n    } finally {\n      setSocialLoading(null);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      if (mode === \"signup\") {\n        const result = await signUp.email({\n          email,\n          password,\n          name,\n        });\n\n        if (result.error) {\n          toast.error(result.error.message || \"Failed to sign up\");\n          return;\n        }\n\n        toast.success(\"Account created! Please check your email to verify your account.\");\n        router.push(\"/sign-in\");\n      } else {\n        const result = await signIn.email({\n          email,\n          password,\n        });\n\n        if (result.error) {\n          toast.error(result.error.message || \"Failed to sign in\");\n          return;\n        }\n\n        toast.success(\"Signed in successfully!\");\n        router.push(\"/dashboard\");\n      }\n    } catch (error) {\n      toast.error(\"An unexpected error occurred\");\n      console.error(error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"w-full max-w-md space-y-6\">\n      <div className=\"text-center space-y-2\">\n        <h1 className=\"text-3xl font-bold tracking-tight\">\n          {mode === \"signin\" ? \"Welcome back\" : \"Create an account\"}\n        </h1>\n        <p className=\"text-muted-foreground\">\n          {mode === \"signin\"\n            ? \"Enter your credentials to sign in\"\n            : \"Enter your information to get started\"}\n        </p>\n      </div>\n\n      {/* Social Login Buttons */}\n      <div className=\"space-y-3\">\n        <SocialLoginButton\n          provider=\"google\"\n          onClick={() => handleSocialSignIn(\"google\")}\n          isLoading={socialLoading === \"google\"}\n        />\n\n        <SocialLoginButton\n          provider=\"github\"\n          onClick={() => handleSocialSignIn(\"github\")}\n          isLoading={socialLoading === \"github\"}\n        />\n      </div>\n\n      {/* Divider */}\n      <div className=\"relative\">\n        <div className=\"absolute inset-0 flex items-center\">\n          <span className=\"w-full border-t\" />\n        </div>\n        <div className=\"relative flex justify-center text-xs uppercase\">\n          <span className=\"bg-background px-2 text-muted-foreground\">\n            Or continue with\n          </span>\n        </div>\n      </div>\n\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        {mode === \"signup\" && (\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"name\">Name</Label>\n            <Input\n              id=\"name\"\n              type=\"text\"\n              placeholder=\"John Doe\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              required\n              disabled={isLoading}\n            />\n          </div>\n        )}\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"email\">Email</Label>\n          <Input\n            id=\"email\"\n            type=\"email\"\n            placeholder=\"you@example.com\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            required\n            disabled={isLoading}\n          />\n        </div>\n\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"password\">Password</Label>\n            {mode === \"signin\" && (\n              <Link\n                href=\"/forgot-password\"\n                className=\"text-sm text-primary hover:underline\"\n              >\n                Forgot password?\n              </Link>\n            )}\n          </div>\n          <div className=\"relative\">\n            <Input\n              id=\"password\"\n              type={showPassword ? \"text\" : \"password\"}\n              placeholder=\"••••••••\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              required\n              disabled={isLoading}\n              minLength={8}\n              className=\"pr-10\"\n            />\n            <button\n              type=\"button\"\n              onClick={() => setShowPassword(!showPassword)}\n              className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors\"\n              disabled={isLoading}\n              aria-label={showPassword ? \"Hide password\" : \"Show password\"}\n            >\n              {showPassword ? (\n                <EyeOff className=\"h-4 w-4\" />\n              ) : (\n                <Eye className=\"h-4 w-4\" />\n              )}\n            </button>\n          </div>\n          {mode === \"signup\" && (\n            <p className=\"text-xs text-muted-foreground\">\n              Must be at least 8 characters\n            </p>\n          )}\n        </div>\n\n        <Button type=\"submit\" className=\"w-full\" disabled={isLoading}>\n          {isLoading\n            ? mode === \"signup\"\n              ? \"Creating your account...\"\n              : \"Signing you in...\"\n            : mode === \"signin\"\n            ? \"Sign In\"\n            : \"Create Account\"}\n        </Button>\n      </form>\n\n      <div className=\"text-center text-sm\">\n        {mode === \"signin\" ? (\n          <p className=\"text-muted-foreground\">\n            Don&apos;t have an account?{\" \"}\n            <Link href=\"/sign-up\" className=\"text-primary hover:underline font-medium\">\n              Sign up\n            </Link>\n          </p>\n        ) : (\n          <p className=\"text-muted-foreground\">\n            Already have an account?{\" \"}\n            <Link href=\"/sign-in\" className=\"text-primary hover:underline font-medium\">\n              Sign in\n            </Link>\n          </p>\n        )}\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/auth/ProtectedRoute.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":5,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getSession } from \"@/lib/auth-utils\";\nimport { redirect } from \"next/navigation\";\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n  redirectTo?: string;\n}\n\n/**\n * Server component that protects routes by checking authentication\n * Usage: Wrap your page content with this component\n * \n * Example:\n * ```tsx\n * export default async function DashboardPage() {\n *   return (\n *     <ProtectedRoute>\n *       <YourDashboardContent />\n *     </ProtectedRoute>\n *   );\n * }\n * ```\n */\nexport async function ProtectedRoute({ \n  children, \n  redirectTo = \"/sign-in\" \n}: ProtectedRouteProps) {\n  const session = await getSession();\n\n  if (!session?.user) {\n    redirect(redirectTo);\n  }\n\n  return <>{children}</>;\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/auth/SessionProvider.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[185,188],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[185,188],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[405,408],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[405,408],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[544,547],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[544,547],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\nimport { authClient } from \"@/lib/auth-client\";\n\ninterface SessionContextType {\n  session: any | null;\n  isLoading: boolean;\n  error: Error | null;\n}\n\nconst SessionContext = createContext<SessionContextType | undefined>(undefined);\n\ninterface AuthProviderProps {\n  children: React.ReactNode;\n  initialSession?: any | null;\n}\n\nexport function SessionProvider({ children, initialSession }: AuthProviderProps) {\n  const [session, setSession] = useState<any | null>(initialSession || null);\n  const [isLoading, setIsLoading] = useState(!initialSession);\n  const [error, setError] = useState<Error | null>(null);\n\n  useEffect(() => {\n    // Skip if we already have a session from SSR\n    if (initialSession) {\n      setIsLoading(false);\n      return;\n    }\n\n    let mounted = true;\n    \n    const fetchSession = async () => {\n      try {\n        const { data: currentSession } = await authClient.getSession();\n        if (mounted) {\n          setSession(currentSession);\n          setError(null);\n        }\n      } catch (err) {\n        if (mounted) {\n          setError(err as Error);\n          setSession(null);\n        }\n      } finally {\n        if (mounted) {\n          setIsLoading(false);\n        }\n      }\n    };\n\n    fetchSession();\n\n    return () => {\n      mounted = false;\n    };\n  }, [initialSession]);\n\n  return (\n    <SessionContext.Provider value={{ session, isLoading, error }}>\n      {children}\n    </SessionContext.Provider>\n  );\n}\n\nexport function useSessionOptimized() {\n  const context = useContext(SessionContext);\n  if (context === undefined) {\n    throw new Error(\"useSessionOptimized must be used within a SessionProvider\");\n  }\n  return context;\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/auth/SocialLoginButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/dashboard/ActiveUsersCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/dashboard/AppSidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/dashboard/ChartAreaInterActive.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/dashboard/DataTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/dashboard/MetricsCards.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/dashboard/RevenueCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/dashboard/SubscriptionBadge.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":21,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":21,"endColumn":22,"suggestions":[{"fix":{"range":[722,783],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Sparkles } from \"lucide-react\";\nimport Link from \"next/link\";\n\nexport function SubscriptionBadge() {\n  const [subscriptionStatus, setSubscriptionStatus] = useState<string>(\"free\");\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Fetch user subscription status\n    // In a real implementation, this would come from the session or an API call\n    const fetchSubscriptionStatus = async () => {\n      try {\n        // TODO: Implement actual subscription status fetch\n        // For now, we'll use a placeholder\n        setSubscriptionStatus(\"free\");\n      } catch (error) {\n        console.error(\"Failed to fetch subscription status:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchSubscriptionStatus();\n  }, []);\n\n  if (loading) {\n    return null;\n  }\n\n  const isPremium = [\"active\", \"trialing\"].includes(subscriptionStatus);\n\n  return (\n    <Link href=\"/profile\" className=\"inline-block\">\n      <Badge\n        variant={isPremium ? \"default\" : \"secondary\"}\n        className={\n          isPremium\n            ? \"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 cursor-pointer\"\n            : \"cursor-pointer hover:bg-secondary/80\"\n        }\n      >\n        {isPremium && <Sparkles className=\"mr-1 h-3 w-3\" />}\n        {isPremium ? \"Premium\" : \"Free Plan\"}\n      </Badge>\n    </Link>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/emails/PasswordResetEmail.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Link' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Link"},"fix":{"range":[78,86],"text":""},"desc":"Remove unused variable 'Link'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Link' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":7}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Body,\n  Button,\n  Container,\n  Head,\n  Heading,\n  Hr,\n  Html,\n  Img,\n  Link,\n  Preview,\n  Section,\n  Tailwind,\n  Text,\n} from \"@react-email/components\";\nimport { emailTheme } from \"@/lib/email-theme\";\n\ntype PasswordResetEmailProps = {\n  resetUrl: string;\n  userEmail?: string;\n  userName?: string;\n  appName?: string;\n  expirationMinutes?: number;\n  logoUrl?: string;\n};\n\nexport function PasswordResetEmail({\n  resetUrl,\n  userEmail,\n  userName,\n  appName,\n  expirationMinutes = 60,\n  logoUrl = \"https://0o4pg1fpby.ufs.sh/f/RSbfEU0J8DcdtpRbOh6sAUj3N86LXf57JKBqdoixIRQHecMu\",\n}: PasswordResetEmailProps) {\n  const brand = appName ?? \"AI SaaS\";\n  const previewText = \"Reset your password\";\n  const greetingName =\n    (userName && userName.trim().split(/\\s+/)[0]) || (userEmail ? userEmail.split(\"@\")[0] : \"there\");\n\n  return (\n    <Html>\n      <Head>\n        <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Geist\" />\n      </Head>\n      <Preview>{previewText}</Preview>\n      <Tailwind>\n        <Body\n          className=\"mx-auto my-auto px-2\"\n          style={{\n            backgroundColor: emailTheme.background,\n            fontFamily:\n              \"'Geist', -apple-system, BlinkMacSystemFont, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif\",\n          }}\n        >\n          <Container className=\"mx-auto my-10 max-w-[600px]\">\n            <Section\n              className=\"border border-solid\"\n              style={{\n                backgroundColor: emailTheme.cardBackground,\n                borderColor: emailTheme.linkBackground,\n                borderRadius: 12,\n              }}\n            >\n              <Section className=\"p-8\">\n                <Section className=\"mb-8 text-center\">\n                  <Img\n                    src={logoUrl}\n                    width={48}\n                    alt={`${brand} logo`}\n                    className=\"mx-auto block\"\n                    style={{ display: \"block\", height: \"auto\" }}\n                  />\n                </Section>\n\n                <Heading\n                  className=\"m-0 mb-5 text-[24px] font-semibold leading-[1.3] text-center\"\n                  style={{ color: emailTheme.text, letterSpacing: \"-0.01em\" }}\n                >\n                  Reset your password\n                </Heading>\n\n                <Text\n                  className=\"mt-0 mb-3 text-[16px] leading-[1.6]\"\n                  style={{ color: emailTheme.secondaryText, fontWeight: 500 }}\n                >\n                  Hello {greetingName},\n                </Text>\n\n                <Text\n                  className=\"mt-0 mb-5 text-[14px] leading-[1.6]\"\n                  style={{ color: emailTheme.secondaryText }}\n                >\n                  We received a request to {\" \"}\n                  <span style={{ fontWeight: 500 }}>reset the password</span>\n                  {\" \"}for your account{\" \"}\n                  {userEmail && <span style={{ color: emailTheme.primary }}>{userEmail}</span>}.\n                  {!userEmail && \"\"} Click the button below to choose a new password.\n                </Text>\n\n                <Section className=\"my-6 text-center\">\n                  <Button\n                    href={resetUrl}\n                    className=\"inline-block text-center no-underline\"\n                    style={{\n                      display: \"inline-flex\",\n                      alignItems: \"center\",\n                      justifyContent: \"center\",\n                      gap: \"8px\",\n                      padding: \"10px 24px\",\n                      fontSize: \"14px\",\n                      fontWeight: 600,\n                      lineHeight: \"1\",\n                      textDecoration: \"none\",\n                      borderRadius: 6,\n                      backgroundColor: emailTheme.primary,\n                      color: emailTheme.primaryForeground,\n                      border: \"none\",\n                    }}\n                  >\n                    Reset password\n                  </Button>\n                </Section>\n\n                <Text\n                  className=\"mt-5 mb-3 text-[12px] leading-normal\"\n                  style={{ color: emailTheme.mutedText, fontWeight: 500 }}\n                >\n                  Or copy and paste this URL into your browser:\n                </Text>\n\n                <Text\n                  className=\"mt-0 mb-5 break-all text-[12px] leading-normal\"\n                  style={{ color: emailTheme.primary, wordBreak: \"break-all\" }}\n                >\n                  {resetUrl}\n                </Text>\n\n                <Hr\n                  className=\"mx-0 my-6 w-full border border-solid\"\n                  style={{ borderColor: emailTheme.linkBackground }}\n                />\n\n                <Text\n                  className=\"mt-0 mb-3 text-[12px] leading-normal\"\n                  style={{ color: emailTheme.mutedText }}\n                >\n                  This link expires in {expirationMinutes} minutes. Email sent by {brand}.\n                </Text>\n\n                <Text\n                  className=\"mt-3 mb-4 text-[12px] leading-normal\"\n                  style={{ color: emailTheme.mutedText }}\n                >\n                  If you didn't request a password reset, you can safely ignore this email. Your password will remain\n                  unchanged.\n                </Text>\n              </Section>\n            </Section>\n          </Container>\n        </Body>\n      </Tailwind>\n    </Html>\n  );\n}\n\nexport default PasswordResetEmail;\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/emails/VerificationEmail.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Link' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Link"},"fix":{"range":[80,88],"text":""},"desc":"Remove unused variable 'Link'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Link' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":7},{"ruleId":"no-unused-vars","severity":2,"message":"'expirationMinutes' is assigned a value but never used.","line":32,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"expirationMinutes"},"fix":{"range":[480,506],"text":""},"desc":"Remove unused variable 'expirationMinutes'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'expirationMinutes' is assigned a value but never used. Allowed unused args must match /^_/u.","line":32,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":20}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"  import {\n  Body,\n  Button,\n  Container,\n  Head,\n  Heading,\n  Hr,\n  Html,\n  Img,\n  Link,\n  Preview,\n  Section,\n  Tailwind,\n  Text,\n} from \"@react-email/components\";\nimport { emailTheme } from \"@/lib/email-theme\";\n\ntype VerificationEmailProps = {\n  verificationUrl: string;\n  userEmail?: string;\n  userName?: string;\n  appName?: string;\n  expirationMinutes?: number;\n  logoUrl?: string;\n};\n\nexport function VerificationEmail({\n  verificationUrl,\n  userEmail,\n  userName,\n  appName,\n  expirationMinutes = 60,\n  logoUrl = \"https://0o4pg1fpby.ufs.sh/f/RSbfEU0J8DcdtpRbOh6sAUj3N86LXf57JKBqdoixIRQHecMu\",\n}: VerificationEmailProps) {\n  const brand = appName ?? \"AI SaaS\";\n  const previewText = `Verify your email for ${brand}`;\n  const greetingName =\n    (userName && userName.trim().split(/\\s+/)[0]) || (userEmail ? userEmail.split(\"@\")[0] : \"there\");\n\n  return (\n    <Html>\n      <Head>\n        <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Geist\" />\n      </Head>\n      <Preview>{previewText}</Preview>\n      <Tailwind>\n        <Body\n          className=\"mx-auto my-auto px-2\"\n          style={{\n            backgroundColor: emailTheme.background,\n            fontFamily:\n              \"'Geist', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif\",\n          }}\n        >\n          <Container className=\"mx-auto my-10 max-w-[600px]\">\n            <Section\n              className=\"border border-solid\"\n              style={{\n                backgroundColor: emailTheme.cardBackground,\n                borderColor: emailTheme.linkBackground,\n                borderRadius: 12,\n              }}\n            >\n              <Section className=\"p-8\">\n                <Section className=\"mb-8 text-center\">\n                  <Img\n                    src={logoUrl}\n                    width={48}\n                    alt={`${brand} logo`}\n                    className=\"mx-auto block\"\n                    style={{ display: \"block\", height: \"auto\" }}\n                  />\n                </Section>\n\n                <Heading\n                  className=\"m-0 mb-5 text-[24px] font-semibold leading-[1.3] text-center\"\n                  style={{ color: emailTheme.text, letterSpacing: \"-0.01em\" }}\n                >\n                  Verify your email\n                </Heading>\n\n                <Text\n                  className=\"mt-0 mb-3 text-[16px] leading-normal\"\n                  style={{ color: emailTheme.secondaryText, fontWeight: 500 }}\n                >\n                  Hello {greetingName},\n                </Text>\n\n                <Text\n                  className=\"mt-0 mb-5 text-[14px] leading-normal\"\n                  style={{ color: emailTheme.secondaryText }}\n                >\n                  We just need to verify your email address{\" \"}\n                  {userEmail && <span style={{ color: emailTheme.primary }}>{userEmail}</span>} before you can access\n                  your account. Click the button below to confirm your email.\n                </Text>\n\n                <Section className=\"my-6 text-center\">\n                  <Button\n                    href={verificationUrl}\n                    className=\"inline-block text-center no-underline\"\n                    style={{\n                      display: \"inline-flex\",\n                      alignItems: \"center\",\n                      justifyContent: \"center\",\n                      gap: \"8px\",\n                      padding: \"10px 24px\",\n                      fontSize: \"14px\",\n                      fontWeight: 600,\n                      lineHeight: \"1\",\n                      textDecoration: \"none\",\n                      borderRadius: 6,\n                      backgroundColor: emailTheme.primary,\n                      color: emailTheme.primaryForeground,\n                      border: \"none\",\n                    }}\n                  >\n                    Verify email\n                  </Button>\n                </Section>\n\n                <Text\n                  className=\"mt-5 mb-3 text-[12px] leading-normal\"\n                  style={{ color: emailTheme.mutedText, fontWeight: 500 }}\n                >\n                  Or copy and paste this URL into your browser:\n                </Text>\n\n                <Text\n                  className=\"mt-0 mb-5 break-all text-[12px] leading-normal\"\n                  style={{ color: emailTheme.primary, wordBreak: \"break-all\" }}\n                >\n                  {verificationUrl}\n                </Text>\n\n                <Hr\n                  className=\"mx-0 my-6 w-full border border-solid\"\n                  style={{ borderColor: emailTheme.linkBackground }}\n                />\n\n                <Text\n                  className=\"mt-0 mb-3 text-[12px] leading-normal\"\n                  style={{ color: emailTheme.mutedText }}\n                >\n                  This link may expire after a short period of time. Email sent by {brand}.\n                </Text>\n\n                <Text\n                  className=\"mt-3 mb-4 text-[12px] leading-normal\"\n                  style={{ color: emailTheme.mutedText }}\n                >\n                  If you didn't sign up for {brand}, you can safely ignore this email. Someone else might have typed\n                  your email address by mistake.\n                </Text>\n              </Section>\n            </Section>\n          </Container>\n        </Body>\n      </Tailwind>\n    </Html>\n  );\n}\n\nexport default VerificationEmail;\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/landing/AnnouncementBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/landing/CtaSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/landing/DottedLine.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/landing/FaqSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/landing/Features.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/landing/FooterSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/landing/Hero.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/landing/HowItWorksSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/landing/LogoCloud.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/landing/Logos.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/landing/PricingSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/landing/SectionCards.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/landing/Testimonials.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/navigation/Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/navigation/NavDocuments.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/navigation/NavMain.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/navigation/NavMenu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/navigation/NavSecondary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/navigation/NavUser.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/navigation/NavigationSheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/navigation/SiteHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/profile/EditProfileCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/profile/ProfileManager.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":92,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":92,"endColumn":24,"suggestions":[{"fix":{"range":[2670,2731],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":97,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":97,"endColumn":20,"suggestions":[{"fix":{"range":[2844,2890],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useSessionOptimized } from '@/components/auth/SessionProvider';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { updateProfileAction, getProfileAction } from '@/lib/actions/profile-actions';\nimport { Loader2, Save, User } from 'lucide-react';\nimport { toast } from 'sonner';\n\ninterface Profile {\n  id: string;\n  user_id: string;\n  email: string;\n  first_name: string | null;\n  last_name: string | null;\n  username: string | null;\n  avatar_url: string | null;\n  created_at: string;\n  updated_at: string;\n}\n\nexport function ProfileManager() {\n  const { session, isLoading: sessionLoading } = useSessionOptimized();\n  const user = session?.user;\n  \n  const [profile, setProfile] = useState<Profile | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSaving, setIsSaving] = useState(false);\n  const [formData, setFormData] = useState({\n    first_name: '',\n    last_name: '',\n    username: '',\n  });\n\n  // Load existing profile on component mount\n  useEffect(() => {\n    if (!sessionLoading && user) {\n      loadProfile();\n    }\n  }, [sessionLoading, user]);\n\n  const loadProfile = async () => {\n    if (!user) return;\n\n    setIsLoading(true);\n    try {\n      const result = await getProfileAction();\n      \n      if (result.success && result.profile) {\n        setProfile(result.profile);\n        setFormData({\n          first_name: result.profile.first_name || '',\n          last_name: result.profile.last_name || '',\n          username: result.profile.username || '',\n        });\n      } else {\n        toast.error(result.error || 'Failed to load profile');\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleInputChange = (field: keyof typeof formData) => (e: { target: { value: string } }) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: e.target.value\n    }));\n  };\n\n  const handleSave = async () => {\n    if (!user) {\n      toast.error('Please sign in to update your profile');\n      return;\n    }\n\n    setIsSaving(true);\n\n    try {\n      const updateResult = await updateProfileAction(formData);\n      \n      if (updateResult.success) {\n        toast.success('Profile updated successfully');\n        await loadProfile();\n      } else {\n        toast.error(updateResult.error || 'Failed to update profile');\n        if (updateResult.details) {\n          console.error('Profile update error:', updateResult.details);\n        }\n      }\n    } catch (error) {\n      toast.error('Failed to update profile. Please try again.');\n      console.error('Profile update error:', error);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  if (sessionLoading || isLoading) {\n    return (\n      <Card className=\"w-full max-w-2xl mx-auto\">\n        <CardHeader>\n          <CardTitle>Profile Manager</CardTitle>\n          <CardDescription>Loading your profile...</CardDescription>\n        </CardHeader>\n        <CardContent className=\"flex justify-center py-8\">\n          <Loader2 className=\"h-8 w-8 animate-spin\" />\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (!user) {\n    return (\n      <Card className=\"w-full max-w-2xl mx-auto\">\n        <CardHeader>\n          <CardTitle>Profile Manager</CardTitle>\n          <CardDescription>Please sign in to manage your profile.</CardDescription>\n        </CardHeader>\n      </Card>\n    );\n  }\n\n  const getInitials = () => {\n    if (formData.first_name && formData.last_name) {\n      return `${formData.first_name[0]}${formData.last_name[0]}`;\n    }\n    return user.name?.[0] || user.email[0];\n  };\n\n  return (\n    <Card className=\"w-full max-w-2xl mx-auto\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <User className=\"h-5 w-5\" />\n          Profile Manager\n        </CardTitle>\n        <CardDescription>\n          Manage your profile information.\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-6\">\n        {/* Profile Header */}\n        <div className=\"flex items-center gap-4\">\n          <Avatar className=\"h-16 w-16\">\n            <AvatarImage src={user.image || undefined} alt={user.name || 'User'} />\n            <AvatarFallback>\n              {getInitials()}\n            </AvatarFallback>\n          </Avatar>\n          <div>\n            <h3 className=\"text-lg font-medium\">{user.name || 'Anonymous User'}</h3>\n            <p className=\"text-sm text-muted-foreground\">{user.email}</p>\n            <p className=\"text-xs text-muted-foreground\">User ID: {user.id}</p>\n          </div>\n        </div>\n\n        {/* Profile Form */}\n        <div className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"first_name\">First Name</Label>\n              <Input\n                id=\"first_name\"\n                value={formData.first_name}\n                onChange={handleInputChange('first_name')}\n                placeholder=\"Enter your first name\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"last_name\">Last Name</Label>\n              <Input\n                id=\"last_name\"\n                value={formData.last_name}\n                onChange={handleInputChange('last_name')}\n                placeholder=\"Enter your last name\"\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"username\">Username</Label>\n            <Input\n              id=\"username\"\n              value={formData.username}\n              onChange={handleInputChange('username')}\n              placeholder=\"Enter your username\"\n            />\n          </div>\n\n          {/* Profile Status */}\n          {profile && (\n            <div className=\"bg-muted/50 p-3 rounded-lg\">\n              <h4 className=\"font-medium text-sm mb-1\">Profile Status</h4>\n              <div className=\"text-xs text-muted-foreground space-y-1\">\n                <p>Profile ID: {profile.id}</p>\n                <p>Last updated: {new Date(profile.updated_at).toLocaleString()}</p>\n                <p>Created: {new Date(profile.created_at).toLocaleString()}</p>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Actions */}\n        <Button \n          onClick={handleSave} \n          disabled={isSaving}\n          className=\"w-full\"\n        >\n          {isSaving ? (\n            <>\n              <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n              Updating Profile...\n            </>\n          ) : (\n            <>\n              <Save className=\"h-4 w-4 mr-2\" />\n              Update Profile\n            </>\n          )}\n        </Button>\n\n        {/* Instructions */}\n        <div className=\"text-xs text-muted-foreground bg-muted/30 p-3 rounded-lg\">\n          <p className=\"font-medium mb-1\">How it works:</p>\n          <ul className=\"list-disc list-inside space-y-1\">\n            <li>Update your profile information and click \"Update Profile\" to save changes</li>\n            <li>Your email is managed through your account settings</li>\n            <li>Changes are saved to your profile database</li>\n          </ul>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/profile/SimpleProfile.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":53,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":53,"endColumn":20,"suggestions":[{"fix":{"range":[1711,1732],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useSessionOptimized } from '@/components/auth/SessionProvider';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { User, Edit2, Mail, Calendar } from 'lucide-react';\nimport { getProfileAction } from '@/lib/actions/profile-actions';\nimport { toast } from 'sonner';\nimport Link from 'next/link';\nimport { SubscriptionCard } from './SubscriptionCard';\nimport { SocialAccountsCard } from './SocialAccountsCard';\n\ninterface Profile {\n  id: string;\n  user_id: string;\n  email: string;\n  first_name: string | null;\n  last_name: string | null;\n  username: string | null;\n  avatar_url: string | null;\n  created_at: string;\n  updated_at: string;\n  subscriptionStatus?: string;\n  subscriptionEndsAt?: string | null;\n}\n\nexport function SimpleProfile() {\n  const { session, isLoading: sessionLoading } = useSessionOptimized();\n  const user = session?.user;\n  const [profile, setProfile] = useState<Profile | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Load profile on mount\n  useEffect(() => {\n    if (!sessionLoading && user) {\n      loadProfile();\n    }\n  }, [sessionLoading, user]);\n\n  const loadProfile = async () => {\n    setIsLoading(true);\n    try {\n      const result = await getProfileAction();\n      if (result.success && result.profile) {\n        setProfile(result.profile);\n      } else {\n        toast.error(result.error || 'Failed to load profile');\n      }\n    } catch (error) {\n      toast.error('Failed to load profile');\n      console.error(error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const getInitials = () => {\n    if (profile?.first_name && profile?.last_name) {\n      return `${profile.first_name[0]}${profile.last_name[0]}`;\n    }\n    return user?.name?.[0] || user?.email[0] || 'U';\n  };\n\n  if (sessionLoading || isLoading) {\n    return (\n      <Card className=\"w-full max-w-2xl mx-auto\">\n        <CardHeader>\n          <CardTitle>Loading Profile</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"animate-pulse space-y-4\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"h-16 w-16 bg-muted rounded-full\"></div>\n              <div className=\"space-y-2\">\n                <div className=\"h-4 bg-muted rounded w-32\"></div>\n                <div className=\"h-3 bg-muted rounded w-48\"></div>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (!user) {\n    return (\n      <Card className=\"w-full max-w-2xl mx-auto\">\n        <CardHeader>\n          <CardTitle>Authentication Required</CardTitle>\n          <CardDescription>Please sign in to view your profile information.</CardDescription>\n        </CardHeader>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6 w-full max-w-2xl mx-auto\">\n      {/* Subscription Card */}\n      <SubscriptionCard \n        subscriptionStatus={profile?.subscriptionStatus}\n        subscriptionEndsAt={profile?.subscriptionEndsAt}\n      />\n\n      {/* Social Accounts Card */}\n      <SocialAccountsCard />\n\n      {/* Profile Card */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <User className=\"h-5 w-5\" />\n            Profile\n          </CardTitle>\n          <CardDescription>\n            Your personal information and account settings\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n        {/* Profile Header */}\n        <div className=\"flex items-center gap-4\">\n          <Avatar className=\"h-16 w-16\">\n            <AvatarImage src={user?.image || undefined} alt={user?.name || 'User'} />\n            <AvatarFallback className=\"text-lg\">\n              {getInitials()}\n            </AvatarFallback>\n          </Avatar>\n          <div className=\"space-y-1\">\n            <h3 className=\"font-semibold text-lg\">\n              {user?.name || 'Anonymous User'}\n            </h3>\n            <p className=\"text-sm text-muted-foreground flex items-center gap-1\">\n              <Mail className=\"h-3 w-3\" />\n              {user?.email}\n            </p>\n          </div>\n        </div>\n\n        {/* Profile Details */}\n        <div className=\"grid gap-3 pt-2\">\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-muted-foreground\">First Name</span>\n            <span className=\"font-medium\">{profile?.first_name || 'Not set'}</span>\n          </div>\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-muted-foreground\">Last Name</span>\n            <span className=\"font-medium\">{profile?.last_name || 'Not set'}</span>\n          </div>\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-muted-foreground\">Username</span>\n            <span className=\"font-medium\">{profile?.username || 'Not set'}</span>\n          </div>\n          {user?.createdAt && (\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-muted-foreground\">Member Since</span>\n              <span className=\"font-medium flex items-center gap-1\">\n                <Calendar className=\"h-3 w-3\" />\n                {new Date(user.createdAt).toLocaleDateString()}\n              </span>\n            </div>\n          )}\n        </div>\n\n        {/* Edit Profile Button */}\n        <div className=\"pt-4\">\n          <Button asChild variant=\"default\" className=\"w-full\">\n            <Link href=\"/profile/edit\">\n              <Edit2 className=\"mr-2 h-4 w-4\" />\n              Edit Profile\n            </Link>\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/profile/SocialAccountsCard.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Badge' is defined but never used.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Badge"},"fix":{"range":[280,326],"text":""},"desc":"Remove unused variable 'Badge'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Badge' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":15},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":45,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":45,"endColumn":22,"suggestions":[{"fix":{"range":[1774,1831],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":74,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":74,"endColumn":20,"suggestions":[{"fix":{"range":[2549,2600],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":96,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":96,"endColumn":20,"suggestions":[{"fix":{"range":[3245,3298],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useSessionOptimized } from \"@/components/auth/SessionProvider\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { toast } from \"sonner\";\nimport { Loader2, Link as LinkIcon, Unlink, Shield, CheckCircle } from \"lucide-react\";\nimport { signIn } from \"@/lib/auth-client\";\n\ninterface SocialAccount {\n  provider: \"google\" | \"github\";\n  providerId: string;\n  accountId: string;\n  linked: boolean;\n}\n\ninterface SocialAccountsCardProps {\n  className?: string;\n}\n\nexport function SocialAccountsCard({ className }: SocialAccountsCardProps) {\n  const { session } = useSessionOptimized();\n  const user = session?.user;\n  const [socialAccounts, setSocialAccounts] = useState<SocialAccount[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [linkingProvider, setLinkingProvider] = useState<string | null>(null);\n\n  // Mock social accounts data - in a real implementation, you'd fetch this from your database\n  useEffect(() => {\n    // This would be a server action to fetch linked social accounts\n    const fetchSocialAccounts = async () => {\n      setIsLoading(true);\n      try {\n        // For now, we'll simulate this data\n        // In production, you'd query the account table for the current user's linked accounts\n        const mockAccounts: SocialAccount[] = [\n          // { provider: \"google\", providerId: \"google\", accountId: \"123456789\", linked: false },\n          // { provider: \"github\", providerId: \"github\", accountId: \"987654321\", linked: false },\n        ];\n\n        setSocialAccounts(mockAccounts);\n      } catch (error) {\n        console.error(\"Failed to fetch social accounts:\", error);\n        toast.error(\"Failed to load social accounts\");\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    if (user) {\n      fetchSocialAccounts();\n    }\n  }, [user]);\n\n  const handleLinkSocial = async (provider: \"google\" | \"github\") => {\n    try {\n      setLinkingProvider(provider);\n\n      const result = await signIn.social({\n        provider,\n        callbackURL: \"/profile?social_linked=true\",\n      });\n\n      if (result.error) {\n        toast.error(result.error.message || `Failed to link ${provider} account`);\n        return;\n      }\n\n      toast.success(`Redirecting to ${provider}...`);\n    } catch (error) {\n      toast.error(`An unexpected error occurred with ${provider} linking`);\n      console.error(`${provider} linking error:`, error);\n    } finally {\n      setLinkingProvider(null);\n    }\n  };\n\n  const handleUnlinkSocial = async (provider: \"google\" | \"github\") => {\n    try {\n      // This would be a server action to unlink the social account\n      // For now, we'll just show a success message\n      toast.success(`${provider} account unlinked successfully`);\n\n      // Update local state\n      setSocialAccounts(prev =>\n        prev.map(account =>\n          account.provider === provider\n            ? { ...account, linked: false, accountId: \"\" }\n            : account\n        )\n      );\n    } catch (error) {\n      toast.error(`Failed to unlink ${provider} account`);\n      console.error(`${provider} unlinking error:`, error);\n    }\n  };\n\n  const getProviderInfo = (provider: \"google\" | \"github\") => {\n    switch (provider) {\n      case \"google\":\n        return {\n          name: \"Google\",\n          icon: (\n            <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\">\n              <path\n                fill=\"#4285F4\"\n                d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\n              />\n              <path\n                fill=\"#34A853\"\n                d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\n              />\n              <path\n                fill=\"#FBBC05\"\n                d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\n              />\n              <path\n                fill=\"#EA4335\"\n                d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\n              />\n            </svg>\n          ),\n          color: \"bg-blue-100 text-blue-800 border-blue-200\",\n        };\n      case \"github\":\n        return {\n          name: \"GitHub\",\n          icon: (\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z\"/>\n            </svg>\n          ),\n          color: \"bg-gray-100 text-gray-800 border-gray-200\",\n        };\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <Card className={className}>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <LinkIcon className=\"h-5 w-5\" />\n            Social Accounts\n          </CardTitle>\n          <CardDescription>Manage your linked social accounts</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-3\">\n            {[\"google\", \"github\"].map((provider) => (\n              <div key={provider} className=\"flex items-center justify-between p-3 border rounded-lg\">\n                <div className=\"animate-pulse flex items-center gap-3\">\n                  <div className=\"h-4 w-4 bg-muted rounded\"></div>\n                  <div className=\"h-4 bg-muted rounded w-20\"></div>\n                </div>\n                <div className=\"animate-pulse h-8 w-20 bg-muted rounded\"></div>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className={className}>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <LinkIcon className=\"h-5 w-5\" />\n          Social Accounts\n        </CardTitle>\n        <CardDescription>\n          Link your social accounts for easier sign-in and enhanced security\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-3\">\n          {([\"google\", \"github\"] as const).map((provider) => {\n            const account = socialAccounts.find(acc => acc.provider === provider);\n            const isLinked = account?.linked || false;\n            const providerInfo = getProviderInfo(provider);\n\n            return (\n              <div\n                key={provider}\n                className={`flex items-center justify-between p-3 border rounded-lg ${\n                  isLinked ? \"bg-muted/30\" : \"\"\n                }`}\n              >\n                <div className=\"flex items-center gap-3\">\n                  {providerInfo.icon}\n                  <div>\n                    <div className=\"font-medium\">{providerInfo.name}</div>\n                    {isLinked ? (\n                      <div className=\"flex items-center gap-1 text-sm text-green-600\">\n                        <CheckCircle className=\"h-3 w-3\" />\n                        Connected\n                      </div>\n                    ) : (\n                      <div className=\"text-sm text-muted-foreground\">Not connected</div>\n                    )}\n                  </div>\n                </div>\n\n                {isLinked ? (\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => handleUnlinkSocial(provider)}\n                    className=\"text-destructive hover:text-destructive\"\n                  >\n                    <Unlink className=\"h-3 w-3 mr-1\" />\n                    Unlink\n                  </Button>\n                ) : (\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => handleLinkSocial(provider)}\n                    disabled={linkingProvider === provider}\n                  >\n                    {linkingProvider === provider ? (\n                      <Loader2 className=\"h-3 w-3 mr-1 animate-spin\" />\n                    ) : (\n                      <LinkIcon className=\"h-3 w-3 mr-1\" />\n                    )}\n                    {linkingProvider === provider ? \"Linking...\" : \"Link\"}\n                  </Button>\n                )}\n              </div>\n            );\n          })}\n        </div>\n\n        <div className=\"mt-4 p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg\">\n          <div className=\"flex items-start gap-2\">\n            <Shield className=\"h-4 w-4 text-blue-600 mt-0.5\" />\n            <div className=\"text-sm text-blue-800 dark:text-blue-200\">\n              <p className=\"font-medium mb-1\">Security Benefits</p>\n              <p className=\"text-xs\">\n                Linking social accounts adds an extra layer of security and makes it easier to recover your account if needed.\n              </p>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/profile/SubscriptionCard.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'authClient' is defined but never used.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"authClient"},"fix":{"range":[310,357],"text":""},"desc":"Remove unused variable 'authClient'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'authClient' is defined but never used.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":20},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":35,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":35,"endColumn":20,"suggestions":[{"fix":{"range":[1149,1187],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":54,"column":32,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":54,"endColumn":51},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":107,"column":25,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":107,"endColumn":44}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { CreditCard, ExternalLink, Sparkles } from \"lucide-react\";\nimport { authClient } from \"@/lib/auth-client\";\nimport { toast } from \"sonner\";\nimport Link from \"next/link\";\n\ninterface SubscriptionCardProps {\n  subscriptionStatus?: string;\n  subscriptionEndsAt?: string | null;\n}\n\nexport function SubscriptionCard({ \n  subscriptionStatus = \"free\", \n  subscriptionEndsAt \n}: SubscriptionCardProps) {\n  const [loading, setLoading] = useState(false);\n\n  const isPremium = [\"active\", \"trialing\"].includes(subscriptionStatus);\n  const isCanceled = subscriptionStatus === \"canceled\";\n  const hasGracePeriod = isCanceled && subscriptionEndsAt && new Date(subscriptionEndsAt) > new Date();\n\n  const handleManageSubscription = async () => {\n    try {\n      setLoading(true);\n      \n      // Redirect to Dodo customer portal\n      window.location.href = \"/api/customer-portal\";\n      \n    } catch (error) {\n      console.error(\"Portal error:\", error);\n      toast.error(\"Failed to open subscription portal. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusBadge = () => {\n    if (isPremium) {\n      return <Badge className=\"bg-gradient-to-r from-purple-500 to-pink-500\">Premium</Badge>;\n    }\n    if (hasGracePeriod) {\n      return <Badge variant=\"outline\" className=\"border-orange-500 text-orange-500\">Canceled</Badge>;\n    }\n    return <Badge variant=\"secondary\">Free</Badge>;\n  };\n\n  const getStatusDescription = () => {\n    if (hasGracePeriod) {\n      const endDate = new Date(subscriptionEndsAt!).toLocaleDateString();\n      return `Your premium access will end on ${endDate}`;\n    }\n    if (isPremium) {\n      return \"You have access to all premium features\";\n    }\n    return \"Upgrade to unlock premium features\";\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <CreditCard className=\"h-5 w-5\" />\n            <CardTitle>Subscription</CardTitle>\n          </div>\n          {getStatusBadge()}\n        </div>\n        <CardDescription>\n          {getStatusDescription()}\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {/* Current Plan Info */}\n        <div className=\"rounded-lg border p-4 space-y-3\">\n          <div className=\"flex items-center justify-between\">\n            <span className=\"text-sm font-medium\">Current Plan</span>\n            <span className=\"text-lg font-bold\">\n              {isPremium || hasGracePeriod ? \"Premium\" : \"Free\"}\n            </span>\n          </div>\n          \n          {isPremium && (\n            <div className=\"space-y-2 text-sm text-muted-foreground\">\n              <div className=\"flex items-center gap-2\">\n                <Sparkles className=\"h-4 w-4 text-primary\" />\n                <span>Unlimited projects</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Sparkles className=\"h-4 w-4 text-primary\" />\n                <span>Priority support</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Sparkles className=\"h-4 w-4 text-primary\" />\n                <span>Advanced analytics</span>\n              </div>\n            </div>\n          )}\n\n          {hasGracePeriod && (\n            <div className=\"text-sm text-orange-600 dark:text-orange-400\">\n              Your subscription has been canceled but you still have access until{\" \"}\n              {new Date(subscriptionEndsAt!).toLocaleDateString()}\n            </div>\n          )}\n        </div>\n\n        {/* Action Buttons */}\n        <div className=\"flex flex-col gap-2\">\n          {isPremium || hasGracePeriod ? (\n            <Button\n              onClick={handleManageSubscription}\n              disabled={loading}\n              variant=\"outline\"\n              className=\"w-full\"\n            >\n              <ExternalLink className=\"mr-2 h-4 w-4\" />\n              {loading ? \"Loading...\" : \"Manage Subscription\"}\n            </Button>\n          ) : (\n            <Button asChild className=\"w-full\">\n              <Link href=\"/pricing\">\n                <Sparkles className=\"mr-2 h-4 w-4\" />\n                Upgrade to Premium\n              </Link>\n            </Button>\n          )}\n        </div>\n\n        {!isPremium && !hasGracePeriod && (\n          <p className=\"text-xs text-center text-muted-foreground\">\n            Get access to all premium features for $29/month\n          </p>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/shared/Logo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/theme/ThemeProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/theme/ThemeScript.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/theme/ThemeToggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/chart.tsx","messages":[],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":2,"message":"'k' is defined but never used.","line":13,"column":4,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":5,"suggestions":[{"messageId":"removeVar","data":{"varName":"k"},"fix":{"range":[296,297],"text":""},"desc":"Remove unused variable 'k'."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/marquee.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/navigation-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/sidebar.tsx","messages":[],"suppressedMessages":[{"ruleId":"no-unused-vars","severity":2,"message":"'open' is defined but never used.","line":39,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"open"},"fix":{"range":[1076,1089],"text":""},"desc":"Remove unused variable 'open'."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'open' is defined but never used.","line":42,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"open"},"fix":{"range":[1184,1197],"text":""},"desc":"Remove unused variable 'open'."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'open' is defined but never used.","line":70,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"open"},"fix":{"range":[1807,1820],"text":""},"desc":"Remove unused variable 'open'."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'value' is defined but never used.","line":81,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":81,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"value"},"fix":{"range":[2251,2265],"text":""},"desc":"Remove unused variable 'value'."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/sonner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/toggle-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/toggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/components/ui/tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/hooks/use-mobile.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/hooks/use-theme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/lib/actions/profile-actions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[308,311],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[308,311],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server';\n\nimport { auth } from '@/lib/auth';\nimport { getSupabaseAdmin } from '@/lib/db/supabase';\nimport { headers } from 'next/headers';\n\ninterface UpdateProfileData {\n  first_name?: string;\n  last_name?: string;\n  username?: string;\n}\n\ninterface ProfileUpdateResult {\n  success: boolean;\n  profile?: any;\n  error?: string;\n  details?: string;\n}\n\n/**\n * Server Action to update a user's profile\n */\nexport async function updateProfileAction(profileData: UpdateProfileData): Promise<ProfileUpdateResult> {\n  try {\n    // Get the authenticated user session\n    const session = await auth.api.getSession({\n      headers: await headers(),\n    });\n    \n    if (!session?.user) {\n      return {\n        success: false,\n        error: 'User not authenticated',\n        details: 'Please sign in to update your profile',\n      };\n    }\n\n    const userId = session.user.id;\n\n    // Update user in Better Auth user table if name changed\n    if (profileData.first_name || profileData.last_name) {\n      const name = `${profileData.first_name || ''} ${profileData.last_name || ''}`.trim();\n      \n      const supabase = getSupabaseAdmin();\n      const { error: userError } = await supabase\n        .from('user')\n        .update({ name, updatedAt: new Date().toISOString() })\n        .eq('id', userId);\n\n      if (userError) {\n        return {\n          success: false,\n          error: 'Failed to update user',\n          details: userError.message,\n        };\n      }\n    }\n\n    // Update profile in Supabase\n    const supabase = getSupabaseAdmin();\n    \n    const supabaseProfileData = {\n      user_id: userId,\n      email: session.user.email,\n      first_name: profileData.first_name,\n      last_name: profileData.last_name,\n      username: profileData.username,\n      updated_at: new Date().toISOString(),\n    };\n\n    const { data, error } = await supabase\n      .from('profiles')\n      .upsert(supabaseProfileData, {\n        onConflict: 'user_id',\n        ignoreDuplicates: false,\n      })\n      .select()\n      .single();\n\n    if (error) {\n      return {\n        success: false,\n        error: 'Failed to update profile',\n        details: error.message,\n      };\n    }\n\n    return {\n      success: true,\n      profile: data,\n    };\n\n  } catch (error) {\n    return {\n      success: false,\n      error: 'Internal server error',\n      details: error instanceof Error ? error.message : 'Unknown error',\n    };\n  }\n}\n\n/**\n * Server Action to get a user's profile from the database\n */\nexport async function getProfileAction(): Promise<ProfileUpdateResult> {\n  try {\n    // Get the authenticated user session\n    const session = await auth.api.getSession({\n      headers: await headers(),\n    });\n    \n    if (!session?.user) {\n      return {\n        success: false,\n        error: 'User not authenticated',\n        details: 'Please sign in to view your profile',\n      };\n    }\n\n    const userId = session.user.id;\n\n    // Get profile from Supabase\n    const supabase = getSupabaseAdmin();\n    \n    const { data, error } = await supabase\n      .from('profiles')\n      .select('*')\n      .eq('user_id', userId)\n      .single();\n\n    if (error) {\n      // If profile doesn't exist, create it\n      if (error.code === 'PGRST116') {\n        const newProfile = {\n          user_id: userId,\n          email: session.user.email,\n          first_name: null,\n          last_name: null,\n          username: null,\n          avatar_url: session.user.image || null,\n        };\n\n        const { data: createdProfile, error: createError } = await supabase\n          .from('profiles')\n          .insert(newProfile)\n          .select()\n          .single();\n\n        if (createError) {\n          return {\n            success: false,\n            error: 'Failed to create profile',\n            details: createError.message,\n          };\n        }\n\n        // Fetch subscription data from user table\n        const { data: userData } = await supabase\n          .from('user')\n          .select('subscriptionStatus, subscriptionEndsAt')\n          .eq('id', userId)\n          .single();\n\n        return {\n          success: true,\n          profile: {\n            ...createdProfile,\n            subscriptionStatus: userData?.subscriptionStatus || 'free',\n            subscriptionEndsAt: userData?.subscriptionEndsAt || null,\n          },\n        };\n      }\n\n      return {\n        success: false,\n        error: 'Failed to fetch profile',\n        details: error.message,\n      };\n    }\n\n    // Fetch subscription data from user table\n    const { data: userData } = await supabase\n      .from('user')\n      .select('subscriptionStatus, subscriptionEndsAt')\n      .eq('id', userId)\n      .single();\n\n    return {\n      success: true,\n      profile: {\n        ...data,\n        subscriptionStatus: userData?.subscriptionStatus || 'free',\n        subscriptionEndsAt: userData?.subscriptionEndsAt || null,\n      },\n    };\n\n  } catch (error) {\n    return {\n      success: false,\n      error: 'Internal server error',\n      details: error instanceof Error ? error.message : 'Unknown error',\n    };\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/lib/auth-client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/lib/auth-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/lib/auth.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":15,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":15,"endColumn":16,"suggestions":[{"fix":{"range":[630,710],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-undef","severity":2,"message":"'URL' is not defined.","line":18,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":18,"endColumn":27},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":19,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":19,"endColumn":16,"suggestions":[{"fix":{"range":[776,919],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":25,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":25,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":17},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":26,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":26,"endColumn":18,"suggestions":[{"fix":{"range":[944,1020],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":32,"column":21,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":32,"endColumn":36},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":42,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":42,"endColumn":16,"suggestions":[{"fix":{"range":[1552,1606],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":54,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":54,"endColumn":21,"suggestions":[{"fix":{"range":[1925,1995],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":88,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":88,"endColumn":20,"suggestions":[{"fix":{"range":[3013,3087],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":100,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":100,"endColumn":22,"suggestions":[{"fix":{"range":[3479,3544],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":112,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":112,"endColumn":22,"suggestions":[{"fix":{"range":[3892,3954],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":123,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":123,"endColumn":20,"suggestions":[{"fix":{"range":[4229,4304],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":125,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":125,"endColumn":22,"suggestions":[{"fix":{"range":[4337,4419],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":130,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":130,"endColumn":21,"suggestions":[{"fix":{"range":[4575,4643],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":150,"column":11,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":150,"endColumn":42},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":154,"column":17,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":154,"endColumn":46},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":155,"column":21,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":155,"endColumn":54},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":159,"column":17,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":159,"endColumn":46},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":160,"column":21,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":160,"endColumn":54},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":165,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5832,5835],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5832,5835],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":165,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5846,5849],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5846,5849],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":168,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":168,"endColumn":20,"suggestions":[{"fix":{"range":[5947,6019],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":180,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":180,"endColumn":22,"suggestions":[{"fix":{"range":[6403,6468],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":193,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":193,"endColumn":22,"suggestions":[{"fix":{"range":[6850,6912],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":204,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":204,"endColumn":20,"suggestions":[{"fix":{"range":[7170,7252],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":206,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":206,"endColumn":22,"suggestions":[{"fix":{"range":[7285,7364],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":218,"column":26,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":218,"endColumn":59},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":222,"column":26,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":222,"endColumn":62},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":232,"column":23,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":232,"endColumn":55},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":236,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":236,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8329,8332],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8329,8332],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":252,"column":17,"nodeType":"MemberExpression","messageId":"unexpected","endLine":252,"endColumn":28,"suggestions":[{"fix":{"range":[8927,8994],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":255,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":255,"endColumn":28,"suggestions":[{"fix":{"range":[9055,9112],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":261,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":261,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9302,9305],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9302,9305],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":275,"column":17,"nodeType":"MemberExpression","messageId":"unexpected","endLine":275,"endColumn":28,"suggestions":[{"fix":{"range":[9789,9857],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":278,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":278,"endColumn":28,"suggestions":[{"fix":{"range":[9918,9974],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":282,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":282,"endColumn":24,"suggestions":[{"fix":{"range":[10064,10109],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":34,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { betterAuth } from \"better-auth\";\nimport * as React from \"react\";\nimport { Pool } from \"pg\";\nimport { Resend } from \"resend\";\nimport { dodopayments, checkout, webhooks } from \"@dodopayments/better-auth\";\nimport VerificationEmail from \"@/components/emails/VerificationEmail\";\nimport PasswordResetEmail from \"@/components/emails/PasswordResetEmail\";\nimport { dodoClient } from \"./dodo\";\n\n// Initialize Resend for email sending (only if API key is available)\nconst resend = process.env.RESEND_API_KEY ? new Resend(process.env.RESEND_API_KEY) : null;\n\nconst rawDatabaseUrl = process.env.DATABASE_URL;\nif (!rawDatabaseUrl) {\n  console.error(\"[Better Auth] DATABASE_URL is not set in environment variables\");\n} else {\n  try {\n    const parsed = new URL(rawDatabaseUrl);\n    console.log(\n      \"[Better Auth] Using DATABASE_URL host:\",\n      parsed.hostname,\n      \"port:\",\n      parsed.port || \"(default 5432)\"\n    );\n  } catch (error) {\n    console.error(\"[Better Auth] Invalid DATABASE_URL format:\", rawDatabaseUrl);\n  }\n}\n\n// Initialize Postgres pool for Better Auth with optimized settings\nconst pool = new Pool({\n  connectionString: rawDatabaseUrl!,\n  max: 1, // Single connection per serverless instance to prevent exhaustion\n  min: 1, // Maintain at least one connection\n  idleTimeoutMillis: 60000, // Keep idle connections longer\n  connectionTimeoutMillis: 15000, // Increased timeout for stability\n  ssl: { rejectUnauthorized: false }, // Allow SSL connection for Supabase\n});\n\n// Handle unexpected pool errors\npool.on('error', (err) => {\n  console.error('Unexpected database pool error:', err);\n});\n\nexport const auth = betterAuth({\n  database: pool,\n  emailAndPassword: {\n    enabled: true,\n    requireEmailVerification: true,\n    minPasswordLength: 8,\n    autoSignIn: false,\n    sendResetPassword: async ({ user, url }: { user: { email: string; name?: string }; url: string }) => {\n      if (!resend) {\n        console.warn('Resend not configured - skipping password reset email');\n        return;\n      }\n      await resend.emails.send({\n        from: process.env.EMAIL_FROM || \"noreply@yourdomain.com\",\n        to: user.email,\n        subject: \"Reset your password\",\n        react: React.createElement(PasswordResetEmail, {\n          resetUrl: url,\n          userEmail: user.email,\n          userName: user.name ?? undefined,\n        }),\n      });\n    },\n  },\n  session: {\n    expiresIn: 60 * 60 * 24 * 7, // 7 days\n    updateAge: 60 * 60 * 24, // 1 day\n    cookieCache: {\n      enabled: true,\n      maxAge: 5 * 60, // Cache for 5 minutes\n      refreshCache: {\n        updateAge: 60 // Refresh when 60 seconds remain before expiry\n      },\n      strategy: \"compact\", // Use compact strategy for smallest cookie size\n    },\n    freshAge: 60 * 5, // Consider session fresh for 5 minutes\n  },\n  emailVerification: {\n    sendOnSignUp: true,\n    autoSignInAfterVerification: true,\n    afterEmailVerification: async (user) => {\n      // Create Dodo customer after email verification\n      try {\n        console.log(`🔄 Creating Dodo customer for verified user: ${user.email}`);\n        \n        // Check if customer already exists\n        const existingCustomers = await dodoClient.customers.list({\n          email: user.email,\n        });\n\n        let dodoCustomerId: string;\n\n        if (existingCustomers.items && existingCustomers.items.length > 0) {\n          // Customer already exists\n          dodoCustomerId = existingCustomers.items[0].customer_id;\n          console.log(`✅ Found existing Dodo customer: ${dodoCustomerId}`);\n        } else {\n          // Create new customer in Dodo\n          const newCustomer = await dodoClient.customers.create({\n            email: user.email,\n            name: user.name || \"\",\n            metadata: {\n              userId: user.id,\n            },\n          });\n          \n          dodoCustomerId = newCustomer.customer_id;\n          console.log(`✅ Created new Dodo customer: ${dodoCustomerId}`);\n        }\n        \n        // Update database with Dodo customer ID\n        await pool.query(\n          `UPDATE public.user \n           SET \"dodoCustomerId\" = $1, \"updatedAt\" = NOW()\n           WHERE id = $2`,\n          [dodoCustomerId, user.id]\n        );\n        \n        console.log(`✅ Linked Dodo customer ${dodoCustomerId} to user ${user.id}`);\n      } catch (error) {\n        console.error('❌ Failed to create/link Dodo customer after verification:', error);\n      }\n    },\n    sendVerificationEmail: async ({ user, url }: { user: { email: string; name?: string }; url: string }) => {\n      if (!resend) {\n        console.warn('Resend not configured - skipping email verification');\n        return;\n      }\n      await resend.emails.send({\n        from: process.env.EMAIL_FROM || \"noreply@yourdomain.com\",\n        to: user.email,\n        subject: \"Verify your email address\",\n        react: React.createElement(VerificationEmail, {\n          verificationUrl: url,\n          userEmail: user.email,\n          userName: user.name ?? undefined,\n        }),\n      });\n    },\n  },\n  trustedOrigins: [\n    process.env.NEXT_PUBLIC_APP_URL || \"http://localhost:3000\",\n    \"http://localhost:3000\",\n    ...(process.env.NGROK_URL ? [process.env.NGROK_URL] : []),\n  ],\n  secret: process.env.BETTER_AUTH_SECRET!,\n  baseURL: process.env.BETTER_AUTH_URL || \"http://localhost:3000\",\n  socialProviders: {\n    google: {\n      clientId: process.env.GOOGLE_CLIENT_ID!,\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET!,\n      enabled: !!process.env.GOOGLE_CLIENT_ID && !!process.env.GOOGLE_CLIENT_SECRET,\n    },\n    github: {\n      clientId: process.env.GITHUB_CLIENT_ID!,\n      clientSecret: process.env.GITHUB_CLIENT_SECRET!,\n      enabled: !!process.env.GITHUB_CLIENT_ID && !!process.env.GITHUB_CLIENT_SECRET,\n    },\n  },\n  social: {\n    afterSignIn: async ({ user, account }: { user: any; account: any }) => {\n      // Create Dodo customer after successful social authentication\n      try {\n        console.log(`🔄 Creating Dodo customer for social user: ${user.email}`);\n\n        // Check if customer already exists\n        const existingCustomers = await dodoClient.customers.list({\n          email: user.email,\n        });\n\n        let dodoCustomerId: string;\n\n        if (existingCustomers.items && existingCustomers.items.length > 0) {\n          // Customer already exists\n          dodoCustomerId = existingCustomers.items[0].customer_id;\n          console.log(`✅ Found existing Dodo customer: ${dodoCustomerId}`);\n        } else {\n          // Create new customer in Dodo\n          const newCustomer = await dodoClient.customers.create({\n            email: user.email,\n            name: user.name || \"\",\n            metadata: {\n              userId: user.id,\n              provider: account.providerId,\n            },\n          });\n\n          dodoCustomerId = newCustomer.customer_id;\n          console.log(`✅ Created new Dodo customer: ${dodoCustomerId}`);\n        }\n\n        // Update database with Dodo customer ID\n        await pool.query(\n          `UPDATE public.user\n           SET \"dodoCustomerId\" = $1, \"updatedAt\" = NOW()\n           WHERE id = $2`,\n          [dodoCustomerId, user.id]\n        );\n\n        console.log(`✅ Linked Dodo customer ${dodoCustomerId} to social user ${user.id}`);\n      } catch (error) {\n        console.error('❌ Failed to create/link Dodo customer for social user:', error);\n      }\n    },\n  },\n  plugins: [\n    dodopayments({\n      client: dodoClient,\n      createCustomerOnSignUp: false, // Don't create until email verified\n      use: [\n        checkout({\n          products: [\n            {\n              productId: process.env.DODO_PRODUCT_ID_FREE!,\n              slug: \"free\",\n            },\n            {\n              productId: process.env.DODO_PRODUCT_ID_PREMIUM!,\n              slug: \"premium\",\n            },\n          ],\n          successUrl:\n            process.env.DODO_SUCCESS_URL ||\n            `${process.env.NEXT_PUBLIC_APP_URL || process.env.BETTER_AUTH_URL || \"http://localhost:3000\"}/success?checkout_id={CHECKOUT_ID}`,\n          authenticatedUsersOnly: true,\n        }),\n        webhooks({\n          webhookKey: process.env.DODO_WEBHOOK_SECRET!,\n          onPaymentSucceeded: async (payload) => {\n            // Payment succeeded - activate user subscription\n            try {\n              const data = (payload as any)?.data;\n              const customerId =\n                data?.customer_id ??\n                data?.customer?.customer_id ??\n                data?.customer?.id;\n\n              if (customerId) {\n                // Update user subscription status to active\n                await pool.query(\n                  `UPDATE public.user \n                   SET \"subscriptionStatus\" = 'active',\n                       \"subscriptionEndsAt\" = NULL,\n                       \"updatedAt\" = NOW()\n                   WHERE \"dodoCustomerId\" = $1`,\n                  [customerId]\n                );\n                console.log(`✅ Activated subscription for customer ${customerId}`);\n              }\n            } catch (error) {\n              console.error('❌ Error activating subscription:', error);\n            }\n          },\n          onPaymentCancelled: async (payload) => {\n            // Payment cancelled - update user status\n            try {\n              const data = (payload as any)?.data;\n              const customerId =\n                data?.customer_id ??\n                data?.customer?.customer_id ??\n                data?.customer?.id;\n\n              if (customerId) {\n                await pool.query(\n                  `UPDATE public.user \n                   SET \"subscriptionStatus\" = 'canceled',\n                       \"updatedAt\" = NOW()\n                   WHERE \"dodoCustomerId\" = $1`,\n                  [customerId]\n                );\n                console.log(`⚠️ Cancelled subscription for customer ${customerId}`);\n              }\n            } catch (error) {\n              console.error('❌ Error canceling subscription:', error);\n            }\n          },\n          onRefundSucceeded: async (payload) => {\n            console.log('💰 Refund processed:', payload);\n            // Handle refunds if needed\n          },\n        }),\n      ],\n    }),\n  ],\n});\n\nexport type Session = typeof auth.$Infer.Session.session;\nexport type User = typeof auth.$Infer.Session.user;\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/lib/db/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/lib/db/supabase.ts","messages":[{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":3,"column":21,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":3,"endColumn":58},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":4,"column":25,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":4,"endColumn":67},{"ruleId":"no-unused-vars","severity":2,"message":"'key' is defined but never used.","line":59,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"key"},"fix":{"range":[1714,1717],"text":""},"desc":"Remove unused variable 'key'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'key' is defined but never used.","line":62,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":62,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"key"},"fix":{"range":[1768,1771],"text":""},"desc":"Remove unused variable 'key'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'key' is defined but never used.","line":65,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"key"},"fix":{"range":[1818,1821],"text":""},"desc":"Remove unused variable 'key'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'key' is defined but never used.","line":68,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":68,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"key"},"fix":{"range":[1877,1880],"text":""},"desc":"Remove unused variable 'key'."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\n\n// Standard client for operations without authentication\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n\n// For server-side operations with elevated privileges\n// Only available on the server side\nexport function getSupabaseAdmin() {\n  const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n  if (!serviceRoleKey) {\n    throw new Error('SUPABASE_SERVICE_ROLE_KEY is not set in environment variables');\n  }\n  return createClient(supabaseUrl, serviceRoleKey);\n}\n\nexport type Database = {\n  public: {\n    Tables: {\n      profiles: {\n        Row: {\n          id: string;\n          user_id: string;\n          email: string;\n          first_name: string | null;\n          last_name: string | null;\n          username: string | null;\n          avatar_url: string | null;\n          created_at: string;\n          updated_at: string;\n        };\n        Insert: {\n          id?: string;\n          user_id: string;\n          email: string;\n          first_name?: string | null;\n          last_name?: string | null;\n          username?: string | null;\n          avatar_url?: string | null;\n          created_at?: string;\n          updated_at?: string;\n        };\n        Update: {\n          id?: string;\n          user_id?: string;\n          email?: string;\n          first_name?: string | null;\n          last_name?: string | null;\n          username?: string | null;\n          avatar_url?: string | null;\n          created_at?: string;\n          updated_at?: string;\n        };\n      };\n    };\n    Views: {\n      [key in string]: never;\n    };\n    Functions: {\n      [key in string]: never;\n    };\n    Enums: {\n      [key in string]: never;\n    };\n    CompositeTypes: {\n      [key in string]: never;\n    };\n  };\n};\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/lib/dodo.ts","messages":[{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":5,"column":16,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":5,"endColumn":50}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import DodoPayments from \"dodopayments\";\n\n// Initialize Dodo Payments SDK client\nexport const dodoClient = new DodoPayments({\n  bearerToken: process.env.DODO_PAYMENTS_API_KEY!,\n  environment: (process.env.DODO_PAYMENTS_ENVIRONMENT as \"test_mode\" | \"live_mode\") || \"test_mode\",\n});\n\n// Legacy polarClient export for backward compatibility during migration\nexport const polarClient = dodoClient;\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/lib/email-theme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/lib/get-server-session.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":8,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":8,"endColumn":18,"suggestions":[{"fix":{"range":[183,237],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getSession } from \"@/lib/auth-utils\";\n\nexport async function getServerSession() {\n  try {\n    const session = await getSession();\n    return session;\n  } catch (error) {\n    console.error(\"Failed to get server session:\", error);\n    return null;\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/lib/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/lib/utils/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/proxy.ts","messages":[{"ruleId":"no-undef","severity":2,"message":"'URL' is not defined.","line":57,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":57,"endColumn":30}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server'\nimport type { NextRequest } from 'next/server'\nimport { getSessionCookie } from 'better-auth/cookies'\n\n// Public routes that don't require authentication\nconst publicRoutes = [\n  '/',\n  '/sign-in',\n  '/sign-up',\n  '/forgot-password',\n  '/reset-password',\n  '/api/auth',\n]\n\n// Check if a path matches public routes\nfunction isPublicRoute(pathname: string): boolean {\n  return publicRoutes.some(route => \n    pathname === route || pathname.startsWith(`${route}/`)\n  )\n}\n\n// Subdomain routing function\nfunction handleSubdomainRouting(request: NextRequest) {\n  const hostname = request.headers.get('host') || ''\n  \n  // Check if request is from dashboard subdomain\n  if (hostname === 'dashboard.website.com' || hostname.startsWith('dashboard.localhost')) {\n    // Rewrite dashboard subdomain to /dashboard route\n    const url = request.nextUrl.clone()\n    url.pathname = `/dashboard${url.pathname}`\n    \n    return NextResponse.rewrite(url)\n  }\n  \n  return NextResponse.next()\n}\n\nexport default async function middleware(req: NextRequest) {\n  const { pathname } = req.nextUrl\n  \n  // Handle subdomain routing first\n  const subdomainResponse = handleSubdomainRouting(req)\n  \n  // Allow public routes\n  if (isPublicRoute(pathname)) {\n    return subdomainResponse\n  }\n  \n  // For protected routes, check if user has a session cookie\n  // Using Better Auth's recommended getSessionCookie helper\n  // NOTE: This only checks for cookie existence, not validity\n  // Actual session validation happens in ProtectedRoute components\n  const sessionCookie = getSessionCookie(req)\n  \n  // If no session cookie and trying to access protected route, redirect to sign-in\n  if (!sessionCookie) {\n    const signInUrl = new URL('/sign-in', req.url)\n    signInUrl.searchParams.set('redirect', pathname)\n    return NextResponse.redirect(signInUrl)\n  }\n  \n  return subdomainResponse\n}\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}","usedDeprecatedRules":[]},{"filePath":"/home/niiithish/Work/ai-saas-templete/scripts/sync-email-theme.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":83,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":83,"endColumn":14,"suggestions":[{"fix":{"range":[2504,2586],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":87,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":87,"endColumn":16,"suggestions":[{"fix":{"range":[2618,2689],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { readFile, writeFile } from \"node:fs/promises\";\nimport { resolve } from \"node:path\";\n\n// Simple CSS variable parser for the :root block in app/globals.css\nasync function extractRootVars(cssPath: string): Promise<Record<string, string>> {\n  const css = await readFile(cssPath, \"utf8\");\n\n  const rootMatch = css.match(/:root\\s*\\{([\\s\\S]*?)\\}/);\n  if (!rootMatch) {\n    throw new Error(\"Could not find :root block in app/globals.css\");\n  }\n\n  const rootBlock = rootMatch[1];\n  const vars: Record<string, string> = {};\n\n  const varRegex = /--([a-z0-9-]+)\\s*:\\s*([^;]+);/gi;\n  let match: RegExpExecArray | null;\n\n  while ((match = varRegex.exec(rootBlock)) !== null) {\n    const name = match[1].trim();\n    const value = match[2].trim();\n    vars[name] = value;\n  }\n\n  return vars;\n}\n\nfunction buildEmailThemeSource(vars: Record<string, string>): string {\n  const v = (key: string, fallback: string) => (vars[key] ?? fallback).replace(/\"/g, \"'\");\n\n  const background = v(\"muted\", \"#f4f4f5\");\n  const cardBackground = v(\"card\", \"#ffffff\");\n\n  const text = v(\"foreground\", \"#333333\");\n  const secondaryText = v(\"secondary-foreground\", \"#4b5563\");\n  const mutedText = v(\"muted-foreground\", \"#6b7280\");\n  const subtleText = v(\"muted-foreground\", \"#9ca3af\");\n\n  const linkBackground = v(\"secondary\", \"#f3f4f6\");\n\n  const primary = v(\"primary\", \"#FB5204\");\n  const primaryForeground = v(\"primary-foreground\", \"#ffffff\");\n  const accent = v(\"accent\", \"#FFF4EC\");\n  const accentForeground = v(\"accent-foreground\", \"#7C2500\");\n\n  return `// AUTO-GENERATED FILE. Do not edit directly.\n// Run: bun run sync:email-theme\n//\n// This file is generated from CSS variables in app/globals.css (:root block)\n// so that email templates stay aligned with the main app brand tokens.\n\nexport const emailTheme = {\n  // Base\n  background: \"${background}\",\n  cardBackground: \"${cardBackground}\",\n\n  // Text colors\n  text: \"${text}\",\n  secondaryText: \"${secondaryText}\",\n  mutedText: \"${mutedText}\",\n  subtleText: \"${subtleText}\",\n\n  // Surfaces\n  linkBackground: \"${linkBackground}\",\n\n  // Brand colors\n  primary: \"${primary}\",\n  primaryForeground: \"${primaryForeground}\",\n  accent: \"${accent}\",\n  accentForeground: \"${accentForeground}\",\n} as const;\n`;\n}\n\nasync function main() {\n  const cssPath = resolve(\"app\", \"globals.css\");\n  const themePath = resolve(\"lib\", \"email-theme.ts\");\n\n  const vars = await extractRootVars(cssPath);\n  const source = buildEmailThemeSource(vars);\n\n  await writeFile(themePath, source, \"utf8\");\n  console.log(\"[sync-email-theme] Updated lib/email-theme.ts from app/globals.css\");\n}\n\nmain().catch((error) => {\n  console.error(\"[sync-email-theme] Failed to sync email theme:\", error);\n  process.exitCode = 1;\n});\n","usedDeprecatedRules":[]}]